<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <title>Registration Form</title>
  </head>
  <body>
    <h1>Registration Form</h1>
    <form
      id="registrationForm"
      action="http://localhost:4000/register"
      method="post"
      enctype="multipart/form-data"
    >
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" required /><br /><br />

      <label for="password">Password:</label>
      <input
        type="password"
        id="password"
        name="password"
        required
      /><br /><br />

      <label for="confirm_password">Confirm Password:</label>
      <input
        type="password"
        id="confirm_password"
        name="confirm_password"
        required
      /><br />
      <p id="passwordMismatch" style="color: red; display: none">
        Passwords do not match.
      </p>
      <br />

      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <table class="table">
              <tbody>
                <tr>
                  <td>
                    <button type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/1.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-1"
                      />
                    </button>
                  </td>
                  <td>
                    <button id="button-2" type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/2.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-2"
                      />
                    </button>
                  </td>
                  <td>
                    <button id="button-3" type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/3.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-3"
                      />
                    </button>
                  </td>
                  <td>
                    <button id="button-4" type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/4.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-4"
                      />
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <button id="button-5" type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/5.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-5"
                      />
                    </button>
                  </td>
                  <td>
                    <button id="button-6" type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/6.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-6"
                      />
                    </button>
                  </td>
                  <td>
                    <button id="button-7" type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/7.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-7"
                      />
                    </button>
                  </td>
                  <td>
                    <button id="button-8" type="button" onclick="setAvatarId()">
                      <img
                        src="../static/assets/playerIcons/8.png"
                        class="img-thumbnail"
                        alt="..."
                        id="avatar-8"
                      />
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <input type="submit" value="Register" />
    </form>

    <script type="text/javascript">
      var avatarId = 1;
      document.addEventListener("DOMContentLoaded", function () {
        var registrationForm = document.getElementById("registrationForm");
        var passwordInput = document.getElementById("password");
        var confirmPasswordInput = document.getElementById("confirm_password");
        var avatarInput = document.getElementById("avatar");

        registrationForm.addEventListener("submit", function (event) {
          var username = document.getElementById("username").value;
          var password = passwordInput.value;
          var confirmPassword = confirmPasswordInput.value;

          if (password !== confirmPassword) {
            document.getElementById("passwordMismatch").style.display = "block";
            console.log("Password missmatch");
            return false;
          }

          var hiddenInput = document.createElement("input");
          hiddenInput.type = "hidden";
          hiddenInput.name = "base64Image";
          hiddenInput.id = "base64Image";
          hiddenInput.value = avatarId;
          registrationForm.appendChild(hiddenInput);
          registrationForm.submit();
        });
      });

      function setAvatarId() {
        event.preventDefault;
        avatarId = event.target.id;
      }
    </script>
  </body>
</html>
